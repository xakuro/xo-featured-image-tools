var XOFieaturedImageTool;(function(e){XOFieaturedImageTool=function(t){let a=this,s=t.post_ids.length,o=0,i=0,n=0,r=!1;this.sprintf=function(){let t=e.makeArray(arguments),a=t.shift();for(let e in t)a=a.replace("%s",t[e]);return a},this.updateStatus=function(t){o+=t.count,i+=t.count-t.error_count,n+=t.error_count,e("#xo-featured-image-bar").progressbar("value",o/s*100),e("#xo-featured-image-bar-percent").html(Math.round(o/s*100)+"%"),e("#xo-featured-image-success-count").html(i),e("#xo-featured-image-error-count").html(n);for(let a of t.messages)e("#xo-featured-image-msg").append("<li>"+a+"</li>")},this.finalization=function(){let a,s=e("#message");e("#xo-featured-image-stop-bottun").hide(),e("#xo-featured-image-message").hide(),e("#xo-featured-image-back-link").show(),r?(a=t.about_message,s.addClass("notice-success")):0===t.post_ids.length?(a=0===n?t.success_message:this.sprintf(t.failure_message,n),s.addClass("notice-success")):(a=t.error_message,s.addClass("notice-warning")),s.html("<p><strong>"+a+"</strong></p>"),s.show()},this.init=function(){e("#xo-featured-image-bar").progressbar(),e("#xo-featured-image-bar-percent").html("0%"),e("#xo-featured-image-stop-bottun").on("click",function(a){r=!0,e(a.target).prop("disabled",!0),e(a.target).val(t.stop_button_message)})},this.start=function(s){e.ajax({type:"POST",url:ajaxurl,data:{action:"xo_featured_image_tools",nonce:t.nonce,ids:s,external_image:t.external_image,default_image:t.default_image}}).done(function(e){e!==Object(e)&&(e=new Object,e.count=0),a.updateStatus(e),t.post_ids.length&&!r&&e.count===s.length?a.start(t.post_ids.splice(0,t.count_per_step)):a.finalization()})},this.init(),this.start(t.post_ids.splice(0,t.count_per_step))}})(jQuery);